const { getPrediction } = require('../services/llm');
const { oddsData } = require('../services/database');
const { formatOddsHistory } = require('./helpers');




/**
 * Generates the final prompt string based on the selected prompt type.
 * @param {'single'|'express'} promptType 
 * @param {object} state The conversation state object.
 * @returns {string}
 */
async function generateFinalPrompt(promptType, state) {
    console.log("--- State received in prompt.js ---", JSON.stringify(state, null, 2));
    const { match, rawOddsHistory, weather, processedFacts, h2hData, statshubHomePerformance, statshubAwayPerformance, statshubMatchInfo, sofascoreLineups, processedHomePlayers, processedAwayPlayers, sofascorePregameForm, poissonProbabilities, expertOpinion, homePerformanceAnalysis, awayPerformanceAnalysis } = state;
    
    const oddsHistoryText = formatOddsHistory(rawOddsHistory, oddsData, poissonProbabilities);

    let weatherText = '';
    if (weather && weather.temp !== undefined && weather.condition) {
        weatherText = `–ü–û–ì–û–î–ê: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${weather.temp}, –£—Å–ª–æ–≤–∏—è: ${weather.condition}\n\n`;
    }

    let factsText = '';
    if (processedFacts && processedFacts.length > 0) {
        factsText = `–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´ [–í–µ—Å: –ù–∏–∑–∫–∏–π]:\n${processedFacts}\n\n`;
    }

    let sofascoreFormText = '';
    if (sofascorePregameForm) {
        sofascoreFormText = '–§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE) [–í–µ—Å: –°—Ä–µ–¥–Ω–∏–π]:\n';
        if (sofascorePregameForm.homeTeam) {
            const { position, value, form } = sofascorePregameForm.homeTeam;
            sofascoreFormText += `- –î–æ–º–∞—à–Ω—è—è –∫–æ–º–∞–Ω–¥–∞: –ü–æ–∑–∏—Ü–∏—è: ${position}, –û—á–∫–∏: ${value}, –§–æ—Ä–º–∞: ${form.join(', ')}\n`;
        }
        if (sofascorePregameForm.awayTeam) {
            const { position, value, form } = sofascorePregameForm.awayTeam;
            sofascoreFormText += `- –ì–æ—Å—Ç–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞: –ü–æ–∑–∏—Ü–∏—è: ${position}, –û—á–∫–∏: ${value}, –§–æ—Ä–º–∞: ${form.join(', ')}\n`;
        }
        sofascoreFormText += '\n';
    }

    let h2hText = '–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H) [–í–µ—Å: –°—Ä–µ–¥–Ω–∏–π, —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é]:\n';
    if (h2hData && h2hData.length > 0) {
        h2hText += h2hData.map(match => `- ${match.homeTeam} ${match.homeGoals} - ${match.awayGoals} ${match.awayTeam}`).join('\n');
    } else {
        h2hText += '–õ–∏—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.';
    }
    h2hText += '\n\n';

    let expertOpinionText = '';
    if (expertOpinion) {
        expertOpinionText = `–û–ë–©–ï–ï –ú–ù–ï–ù–ò–ï –≠–ö–°–ü–ï–†–¢–û–í (PERPLEXITY) [–í–µ—Å: –°—Ä–µ–¥–Ω–∏–π]:\n${expertOpinion}\n\n`;
    }

    let performanceAnalysisText = '';
    if (homePerformanceAnalysis || awayPerformanceAnalysis) {
        performanceAnalysisText = 'AI-–ê–ù–ê–õ–ò–ó –ò–ì–†–û–í–û–ô –§–û–†–ú–´ [–í–µ—Å: –í—ã—Å–æ–∫–∏–π]:\n';
        if (homePerformanceAnalysis) {
            performanceAnalysisText += `–î–æ–º–∞—à–Ω—è—è –∫–æ–º–∞–Ω–¥–∞ (${statshubMatchInfo?.homeTeam?.name}): ${homePerformanceAnalysis}\n`;
        }
        if (awayPerformanceAnalysis) {
            performanceAnalysisText += `–ì–æ—Å—Ç–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ (${statshubMatchInfo?.awayTeam?.name}): ${awayPerformanceAnalysis}\n`;
        }
        performanceAnalysisText += '\n';
    }

    const formatStatshubPerformance = (teamName, performanceData) => {
        if (!performanceData || performanceData.length === 0 || !teamName) return '';

        const numMatches = performanceData.length;

        // A list of all keys we want to aggregate
        const statKeys = [
            "expectedGoals", "bigChanceCreated", "bigChanceScored", "bigChanceMissed",
            "totalShotsInsideBox", "totalShotsOutsideBox", "touchesInOppBox", "finalThirdEntries",
            "ballPossession", "pass_accuracy",
            "goalsPrevented", "aerialDuelsPercentage", "duelWonPercent", "interceptionWon", "totalTackle", "wonTacklePercent",
            "errorsLeadToGoal"
        ];

        // Initialize accumulator for own and opponent stats
        const totals = { own: {}, opponent: {} };
        statKeys.forEach(key => {
            totals.own[key] = { total: 0, count: 0 };
            totals.opponent[key] = { total: 0, count: 0 };
        });
        totals.own.goalsScored = 0; // Special case for actual goals

        // Loop through matches and accumulate stats
        performanceData.forEach(match => {
            if (match.homeTeam === teamName) totals.own.goalsScored += match.scoreHome;
            else if (match.awayTeam === teamName) totals.own.goalsScored += match.scoreAway;

            statKeys.forEach(key => {
                // Own stats
                if (match.statistics && typeof match.statistics[key] === 'number') {
                    totals.own[key].total += match.statistics[key];
                    totals.own[key].count++;
                }
                // Opponent stats
                if (match.opponentStatistics && typeof match.opponentStatistics[key] === 'number') {
                    totals.opponent[key].total += match.opponentStatistics[key];
                    totals.opponent[key].count++;
                }
            });
        });
        
        // Helper to calculate average safely
        const avg = (stat) => {
            if (!stat || stat.count === 0) return 'N/A';
            return (stat.total / stat.count).toFixed(2);
        };

        // Neutral, data-driven interpretations
        const totalXG = totals.own.expectedGoals.total;
        const xgPerformanceDiff = totals.own.goalsScored - totalXG;
        let realizationInterpretation = "";
        if (xgPerformanceDiff > 0.1) {
            realizationInterpretation = `Overperforming (+${xgPerformanceDiff.toFixed(2)} –≥–æ–ª–∞ –∑–∞ ${numMatches} –º–∞—Ç—á–µ–π)`;
        } else if (xgPerformanceDiff < -0.1) {
            realizationInterpretation = `Underperforming (${xgPerformanceDiff.toFixed(2)} –≥–æ–ª–∞ –∑–∞ ${numMatches} –º–∞—Ç—á–µ–π)`;
        } else {
            realizationInterpretation = `(–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç xG)`;
        }

        let text = `–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ ${teamName.toUpperCase()} (–°–í–û–î–ö–ê –ó–ê ${numMatches} –ú–ê–¢–ß–ï–ô) [–í–µ—Å: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π]:\n\n`;
        
        text += `  –°–í–û–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê (–≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –º–∞—Ç—á):\n`;
        text += `    - –ê—Ç–∞–∫–∞: xG: ${avg(totals.own.expectedGoals)}, –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: ${realizationInterpretation}, –£–ø—É—â–µ–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.own.bigChanceMissed)}, –°–æ–∑–¥–∞–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.own.bigChanceCreated)}\n`;
        text += `    - –£–¥–∞—Ä—ã (–≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π/–≤–Ω–µ): ${avg(totals.own.totalShotsInsideBox)}/${avg(totals.own.totalShotsOutsideBox)}, –ö–∞—Å–∞–Ω–∏—è –≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π: ${avg(totals.own.touchesInOppBox)}, –í—Ö–æ–¥—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç—Ä–µ—Ç—å: ${avg(totals.own.finalThirdEntries)}\n`;
        text += `    - –í–ª–∞–¥–µ–Ω–∏–µ –∏ –ø–∞—Å—ã: –í–ª–∞–¥–µ–Ω–∏–µ: ${avg(totals.own.ballPossession)}%, –¢–æ—á–Ω–æ—Å—Ç—å –ø–∞—Å–æ–≤: ${avg(totals.own.pass_accuracy)}%\n`;
        text += `    - –û–±–æ—Ä–æ–Ω–∞: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –≥–æ–ª–æ–≤ (xG conceded - goals): ${avg(totals.own.goalsPrevented)}, –í—ã–∏–≥—Ä–∞–Ω–æ –¥—É—ç–ª–µ–π: ${avg(totals.own.duelWonPercent)}%, –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã: ${avg(totals.own.interceptionWon)}, –û—Ç–±–æ—Ä—ã: ${avg(totals.own.totalTackle)}\n`;
        text += `    - –û—à–∏–±–∫–∏, –ø—Ä–∏–≤–µ–¥—à–∏–µ –∫ –≥–æ–ª—É: ${avg(totals.own.errorsLeadToGoal)}\n\n`;

        text += `  –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–û–ü–ï–†–ù–ò–ö–û–í (–≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –º–∞—Ç—á):\n`;
        text += `    - –ê—Ç–∞–∫–∞: xG: ${avg(totals.opponent.expectedGoals)}, –°–æ–∑–¥–∞–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.opponent.bigChanceCreated)}, –£–ø—É—â–µ–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.opponent.bigChanceMissed)}\n`;
        text += `    - –£–¥–∞—Ä—ã (–≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π/–≤–Ω–µ): ${avg(totals.opponent.totalShotsInsideBox)}/${avg(totals.opponent.totalShotsOutsideBox)}, –ö–∞—Å–∞–Ω–∏—è –≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π: ${avg(totals.opponent.touchesInOppBox)}, –í—Ö–æ–¥—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç—Ä–µ—Ç—å: ${avg(totals.opponent.finalThirdEntries)}\n`;
        text += `    - –í–ª–∞–¥–µ–Ω–∏–µ –∏ –ø–∞—Å—ã: –í–ª–∞–¥–µ–Ω–∏–µ: ${avg(totals.opponent.ballPossession)}%, –¢–æ—á–Ω–æ—Å—Ç—å –ø–∞—Å–æ–≤: ${avg(totals.opponent.pass_accuracy)}%\n`;
        text += `    - –û–±–æ—Ä–æ–Ω–∞: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –≥–æ–ª–æ–≤: ${avg(totals.opponent.goalsPrevented)}, –í—ã–∏–≥—Ä–∞–Ω–æ –¥—É—ç–ª–µ–π: ${avg(totals.opponent.duelWonPercent)}%, –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã: ${avg(totals.opponent.interceptionWon)}, –û—Ç–±–æ—Ä—ã: ${avg(totals.opponent.totalTackle)}\n`;
        text += `    - –û—à–∏–±–∫–∏, –ø—Ä–∏–≤–µ–¥—à–∏–µ –∫ –≥–æ–ª—É: ${avg(totals.opponent.errorsLeadToGoal)}\n\n`;
        
        return text;
    };

    const homeTeamName = statshubMatchInfo?.homeTeam?.name;
    const awayTeamName = statshubMatchInfo?.awayTeam?.name;
    const statshubHomePerformanceText = formatStatshubPerformance(homeTeamName, statshubHomePerformance);
    const statshubAwayPerformanceText = formatStatshubPerformance(awayTeamName, statshubAwayPerformance);
    
    // --- AI-POWERED PLAYER DATA COMBINATION ---
    let combinedPlayerText = '–ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ü–û –°–û–°–¢–ê–í–ê–ú [–í–µ—Å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π]:\n\n–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∏–≥—Ä–æ–∫–∞–º.\n\n'; // Default text in case of error
    try {
        const playerDataPrompt = `
# –ó–ê–î–ê–ß–ê
–¢—ã ‚Äî —ç–ª–∏—Ç–Ω—ã–π —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≥–ª—É–±–æ–∫–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–æ—Å—Ç–∞–≤–∞–º –∫–æ–º–∞–Ω–¥ (–æ—Å–Ω–æ–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∏ –∏—Ö –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –∞ –∑–∞—Ç–µ–º —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å **–∫—Ä–∞—Ç–∫–∏–µ, –Ω–æ –µ–º–∫–∏–µ –≤—ã–≤–æ–¥—ã**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑ –º–∞—Ç—á–∞. –ù–µ –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï

## 1. –°–æ—Å—Ç–∞–≤—ã Sofascore (lineups)
\`\`\`json
${JSON.stringify(sofascoreLineups, null, 2)}
\`\`\`

## 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–º–∞—à–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã (Statshub)
\`\`\`json
${JSON.stringify(processedHomePlayers, null, 2)}
\`\`\`

## 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã (Statshub)
\`\`\`json
${JSON.stringify(processedAwayPlayers, null, 2)}
\`\`\`

# –ê–õ–ì–û–†–ò–¢–ú –ê–ù–ê–õ–ò–ó–ê
1.  **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤:** –ú—ã—Å–ª–µ–Ω–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤—å –∏–≥—Ä–æ–∫–æ–≤ –º–µ–∂–¥—É JSON-–æ–±—ä–µ–∫—Ç–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–µ—á–µ—Ç–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "K. De Bruyne" –∏ "Kevin De Bruyne" ‚Äî –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —á–µ–ª–æ–≤–µ–∫).
2.  **–ê–Ω–∞–ª–∏–∑ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö:** –ò–∑—É—á–∏ —Å–µ–∫—Ü–∏—é 'missingPlayers' –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã.
    - –û–ø—Ä–µ–¥–µ–ª–∏ **—Å–∞–º—ã—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö** –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ (–æ—Å–æ–±–µ–Ω–Ω–æ xG, xA, —Ä–µ–π—Ç–∏–Ω–≥), –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏.
    - –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –≤—ã–≤–æ–¥ –æ —Ç–æ–º, –∫–∞–∫ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –∏–≥—Ä—É –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û—Å–ª–∞–±–ª–µ–Ω —Ü–µ–Ω—Ç—Ä –æ–±–æ—Ä–æ–Ω—ã", "–ü–æ—Ç–µ—Ä—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–ª–µ–π–º–µ–π–∫–µ—Ä–∞", "–ù–µ—Ç –≥–ª–∞–≤–Ω–æ–π —É–≥—Ä–æ–∑—ã –≤ –∞—Ç–∞–∫–µ").
3.  **–ê–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å—Ç–∞—Ä—Ç–µ:** –ò–∑—É—á–∏ —Å–µ–∫—Ü–∏—é 'squad' –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã.
    - –í—ã–¥–µ–ª–∏ 1-3 –∫–ª—é—á–µ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ö–æ—Ä–æ—à–µ–π —Ñ–æ—Ä–º–µ –∏–ª–∏ —á—å—è —Ä–æ–ª—å –±—É–¥–µ—Ç —Ä–µ—à–∞—é—â–µ–π –≤ —ç—Ç–æ–º –º–∞—Ç—á–µ.
    - –û–ø–∏—à–∏ –∏—Ö —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–≥—Ä–æ–∫ X —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ—Ç –º–æ–º–µ–Ω—Ç—ã (–≤—ã—Å–æ–∫–∏–π xA)", "–§–æ—Ä–≤–∞—Ä–¥ Y –∏–º–µ–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–≥–æ–ª—ã > xG)").
4.  **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:** –ö—Ä–∞—Ç–∫–æ —Å—Ä–∞–≤–Ω–∏ —Å–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö —Å–æ—Å—Ç–∞–≤–æ–≤. –ì–¥–µ —É –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –µ—Å—Ç—å —è–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –Ω–∞–¥ –¥—Ä—É–≥–æ–π? (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–ª—É–∑–∞—â–∏—Ç–∞ –¥–æ–º–∞—à–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã –≤—ã–≥–ª—è–¥–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–∏–ª—å–Ω–µ–µ", "–ì–æ—Å—Ç–∏ –∏–º–µ—é—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –Ω–∞ —Ñ–ª–∞–Ω–≥–∞—Ö –∞—Ç–∞–∫–∏").

# –ñ–ï–õ–ï–ó–ù–´–ô –§–û–†–ú–ê–¢ –í–´–í–û–î–ê (–°–¢–†–û–ì–û –°–õ–ï–î–û–í–ê–¢–¨!)

- –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¢–û–õ–¨–ö–û** –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –≤ –≤–∏–¥–µ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.
- **–ó–ê–ü–†–ï–©–ï–ù–û** –¥–æ–±–∞–≤–ª—è—Ç—å –ª—é–±—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–ª–∏ "–≤–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç".
- –ë—É–¥—å –∫—Ä–∞—Ç–æ–∫, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–µ–Ω. –ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º.

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫** –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ü–û –°–û–°–¢–ê–í–ê–ú [–í–µ—Å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π]:
- **[–ö–æ–º–∞–Ω–¥–∞ 1]:** [–í—ã–≤–æ–¥ –æ —Å–∞–º–æ–π –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ø–æ—Ç–µ—Ä–µ. –ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ—Ç–µ—Ä—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∑–∞—â–∏—Ç–Ω–∏–∫–∞ (–∏–º—è, —Å—Ç–æ–∏–º–æ—Å—Ç—å) –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ—Å–ª–∞–±–∏—Ç –æ–±–æ—Ä–æ–Ω—É –ø—Ä–æ—Ç–∏–≤ —Å–∫–æ—Ä–æ—Å—Ç–Ω—ã—Ö –Ω–∞–ø–∞–¥–∞—é—â–∏—Ö.]
- **[–ö–æ–º–∞–Ω–¥–∞ 1]:** [–í—ã–≤–æ–¥ –æ –∫–ª—é—á–µ–≤–æ–º –∏–≥—Ä–æ–∫–µ –≤ —Å—Ç–∞—Ä—Ç–µ. –ù–∞–ø—Ä–∏–º–µ—Ä: –ö–ª—é—á–µ–≤–æ–π –∏–≥—Ä–æ–∫ (–∏–º—è) –≤ –æ—Ç–ª–∏—á–Ω–æ–π —Ñ–æ—Ä–º–µ, –µ–≥–æ —Å–≤—è–∑–∫–∞ —Å (–∏–º—è) —Å–æ–∑–¥–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–º–µ–Ω—Ç–æ–≤ (xA/90 = X.XX).]
- **[–ö–æ–º–∞–Ω–¥–∞ 2]:** [–í—ã–≤–æ–¥ –æ —Å–∞–º–æ–π –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ø–æ—Ç–µ—Ä–µ.]
- **[–ö–æ–º–∞–Ω–¥–∞ 2]: shameful** [–í—ã–≤–æ–¥ –æ –∫–ª—é—á–µ–≤–æ–º –∏–≥—Ä–æ–∫–µ –≤ —Å—Ç–∞—Ä—Ç–µ.]
- **–¢—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ—Å—Ç–∞–≤–æ–≤ –∏ –∏—Ö —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥** –ü–æ—Å—á–∏—Ç–∞–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–µ–¥–ø–æ–ª–æ–≥–∞–µ–º—ã—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ—Å—Ç–∞–≤–æ–≤ –¥–≤—É—Ö –∫–æ–º–∞–Ω–¥
- **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥:** [–ö—Ä–∞—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä: –°—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤ –•–æ–∑—è–µ–≤ –≤—ã–≥–ª—è–¥–∏—Ç –±–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —É –ì–æ—Å—Ç–µ–π –µ—Å—Ç—å —è–≤–Ω—ã–π –ø–µ—Ä–µ–∫–æ—Å –≤ —Å—Ç–æ—Ä–æ–Ω—É –∞—Ç–∞–∫–∏ –≤ —É—â–µ—Ä–± –æ–±–æ—Ä–æ–Ω–µ –∏–∑-–∑–∞ —Ç—Ä–∞–≤–º.]
`;
        console.log("--- Sending player data prompt to AI ---");
        const aiResponse = await getPrediction(playerDataPrompt);
        if (aiResponse) {
            combinedPlayerText = aiResponse;
            console.log("--- AI successfully processed player data. ---");
        }
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ —á–µ—Ä–µ–∑ –ò–ò:", error);
        // combinedPlayerText –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    }
    // --- END AI-POWERED PLAYER DATA COMBINATION ---

    if (promptType === 'single') {
        return `–¢—ã ‚Äî —ç–ª–∏—Ç–Ω—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–ø–ø–µ—Ä—Å–∫–∏–π —Å–∏–Ω–¥–∏–∫–∞—Ç —É—Ä–æ–≤–Ω—è Circl/DarkLine.
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–π—Ç–∏ –æ–¥–Ω—É +EV (value) —Å—Ç–∞–≤–∫—É –Ω–∞ –º–∞—Ç—á. –ï—Å–ª–∏ value –Ω–µ—Ç ‚Äî —Ç—ã –¥–æ–ª–∂–µ–Ω —á–µ—Ç–∫–æ –Ω–∞–ø–∏—Å–∞—Ç—å ¬´Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ¬ª –∏ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï
–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ç–µ–±–µ –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- –ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´: –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ –º–∞—Ç—á–µ.
- –§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE): –ü–æ–∑–∏—Ü–∏—è –≤ –ª–∏–≥–µ, –æ—á–∫–∏ –∏ —Ñ–æ—Ä–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∏–≥—Ä (W/D/L).
- –ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H): –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á.
- –û–ë–©–ï–ï –ú–ù–ï–ù–ò–ï –≠–ö–°–ü–ï–†–¢–û–í (PERPLEXITY): –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –º–Ω–µ–Ω–∏–π —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ –º–∞—Ç—á—É.
- –°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Å–æ—Å—Ç–∞–≤—ã, —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤.
- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ (–°–í–û–î–ö–ê –ó–ê 7 –ú–ê–¢–ß–ï–ô): –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞—Ç–∞–∫–µ –∏ –æ–±–æ—Ä–æ–Ω–µ (xG, —É–¥–∞—Ä—ã, –≤–ª–∞–¥–µ–Ω–∏–µ –∏ —Ç.–¥.) –∏ –≤—ã–≤–æ–¥—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–º–µ–Ω—Ç–æ–≤ (over/underperforming).
- –î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í: –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—ç—Ñ–æ–≤ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ª–∏–Ω–∏–∏, —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑" –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏. –¢–∞–∫–∂–µ —Ç–∞–º –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞—è –∏–∑ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ - –º–∞—Ä–∂–∞. 

# –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´

–®–ê–ì 1. –§–ê–ö–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó (–ê–ù–ê–õ–ò–ó –í–•–û–î–ù–´–• –î–ê–ù–ù–´–•):
1.  **–ö–∞–¥—Ä–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** –í –±–ª–æ–∫–µ "–°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú" –∏–∑—É—á–∏ —Å–ø–∏—Å–æ–∫ "–û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ì–†–û–ö–ò". –û—Ü–µ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—å, –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∏—á–∏–Ω—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∫ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞.
2.  **–ò–≥—Ä–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
    - –í –±–ª–æ–∫–µ "–§–û–†–ú–ê –ö–û–ú–ê–ù–î" –æ—Ü–µ–Ω–∏ —Ç–µ–∫—É—â—É—é —Ñ–æ—Ä–º—É –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º (W/D/L).
    - –í –±–ª–æ–∫–µ "–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò" –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É "–†–µ–∞–ª–∏–∑–∞—Ü–∏—è". –û–ø—Ä–µ–¥–µ–ª–∏, –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—á–∫–∏ ("Overperforming") –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç –ª–∏ –æ—Ç –Ω–µ–≤–µ–∑–µ–Ω–∏—è ("Underperforming"). –û—Ü–µ–Ω–∏ —Å—Ä–µ–¥–Ω–∏–π xG –∏ xG —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤.
3.  **–î–≤–∏–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞:** –í –±–ª–æ–∫–µ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í" –Ω–∞–π–¥–∏ —Ä—ã–Ω–∫–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑". –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "—É–º–Ω—ã—Ö –¥–µ–Ω–µ–≥".
4.  **–ö–æ–Ω—Ç–µ–∫—Å—Ç –º–∞—Ç—á–∞:** –ò–∑—É—á–∏ "–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´" –∏ "–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H)", —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã.
5.  **–°–∏–ª–∞ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞:** –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–Ω–∏—Ü—É –≤ —Å–∏–ª–µ —á–µ–º–ø–∏–æ–Ω–∞—Ç–æ–≤, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –µ–≤—Ä–æ–∫—É–±–∫–∞—Ö). –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –±–æ–ª–µ–µ —Å–ª–∞–±–æ–≥–æ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞.

–®–ê–ì 2. –°–ò–ù–¢–ï–ó –ò –í–´–í–û–î:
- –¢—ã –º–æ–∂–µ—à—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –≤—Å–µ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
- –û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∏–∑ –®–ê–ì–ê 1, —Å—Ñ–æ—Ä–º–∏—Ä—É–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤ (–ü1, –•, –ü2, –¢–æ—Ç–∞–ª—ã –∏ —Ç.–¥.).
- –°—Ä–∞–≤–Ω–∏ —Å–≤–æ–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å —Ä—ã–Ω–æ—á–Ω—ã–º–∏ (–∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∏–∑ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤).
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ—à—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ +EV (–º–∏–Ω–∏–º—É–º +8% –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ –∏–ª–∏ +15% –¥–ª—è —Å–º–æ–ª–ª-–º–∞—Ä–∫–µ—Ç–æ–≤), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –æ—Ç–≤–µ—Ç –≤ "–ñ–ï–õ–ï–ó–ù–û–ú –§–û–†–ú–ê–¢–ï".
- –ï—Å–ª–∏ value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –Ω–∞–ø–∏—à–∏ "Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" –∏ –∫—Ä–∞—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É —Ä—ã–Ω–æ–∫ –æ—Ü–µ–Ω–µ–Ω –≤–µ—Ä–Ω–æ.

–ñ–ï–õ–ï–ó–ù–´–ô –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ):

**–ú–∞—Ç—á:** ${match}

**‚ö†Ô∏è –ö–ª—é—á–µ–≤–∞—è OSINT-–Ω–∞—Ö–æ–¥–∫–∞:**
[–æ–¥–Ω–∞ —Å–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Å–∏–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä—É–∑ –ª–∏–Ω–∏–∏]

**–î–æ–ø. –∏–Ω—Å–∞–π—Ç—ã (2-4 –ø—É–Ω–∫—Ç–∞):**
‚Ä¢ ‚Ä¶
‚Ä¢ ‚Ä¶

**–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è:**
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–µ –≥–æ–ª—ã –î–æ–º: X.XX (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞, –∞ –Ω–µ —á–∏—Å—Ç–æ–π —Å—Ç–∞—Ç—ã)
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–µ –≥–æ–ª—ã –ì–æ—Å—Ç–∏: X.XX
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¢–ë 2.5: XX% (—Ä—ã–Ω–æ–∫ –¥–∞—ë—Ç XX%)

**–í—ã–±—Ä–∞–Ω–Ω–∞—è value-—Å—Ç–∞–≤–∫–∞:**
[–Ω–∞–ø—Ä–∏–º–µ—Ä: –õ–∏–≤–µ—Ä–ø—É–ª—å -0.75 @ 1.95]

**–ë—Ä–∞—Ç—å –∫—ç—Ñ –Ω–µ –Ω–∏–∂–µ:** 1.XX

**–†–∞—Å—á—ë—Ç EV:**
–ú–æ—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: XX% ‚Üí fair odds 1.XX ‚Üí –ø—Ä–∏ 1.XX ‚Üí EV = +X.X%

**–ü–æ—á–µ–º—É —ç—Ç–æ value (3-5 –∂–µ–ª–µ–∑–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤):**
1. ‚Ä¶
2. ‚Ä¶

**–ì–ª–∞–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:**
1. ‚Ä¶

**–í—ã–≤–æ–¥:** [–ï—Å–ª–∏ value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —ç—Ç–æ—Ç –±–ª–æ–∫ –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ —á—Ç–æ –≤—ã—à–µ, –∫—Ä–æ–º–µ "–ú–∞—Ç—á"] Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. Closing line —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –º–æ–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤.

--- –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê ---
${weatherText}
${factsText}
${sofascoreFormText}
${h2hText}
${expertOpinionText}
${performanceAnalysisText}
${combinedPlayerText}
${statshubHomePerformanceText}
${statshubAwayPerformanceText}
${oddsHistoryText}
`;
    }

    if (promptType === 'express') {
        return `1. ü•á –†–û–õ–¨ –ò –ú–ò–°–°–ò–Ø (–ö–û–ù–¢–ï–ö–°–¢)
    –¢—ã ‚Äî Lead Betting Analyst –∑–∞–∫—Ä—ã—Ç–æ–≥–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ —Å–∏–Ω–¥–∏–∫–∞—Ç–∞. –¢–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ø–æ–∏—Å–∫ –Ω–µ–¥–æ–æ—Ü–µ–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (Value Betting) –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø—Ä–µ—Å—Å–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é.
    –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –Ω–µ —É–≥–∞–¥–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –∞ –Ω–∞–π—Ç–∏ –∏—Å—Ö–æ–¥, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–≥–æ —Ä—ã–Ω–æ–∫ –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï
–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ç–µ–±–µ –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- –ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´: –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ –º–∞—Ç—á–µ (–≤–µ—Å: –Ω–∏–∑–∫–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞).
- –§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE): –ü–æ–∑–∏—Ü–∏—è –≤ –ª–∏–≥–µ, –æ—á–∫–∏ –∏ —Ñ–æ—Ä–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∏–≥—Ä (W/D/L) (–≤–µ—Å: —Å—Ä–µ–¥–Ω–∏–π).
- –ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H): –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á (–≤–µ—Å: —Å—Ä–µ–¥–Ω–∏–π, —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é ‚Äî —É—á–∏—Ç—ã–≤–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–æ—Å—Ç–∞–≤–∞—Ö/—Ñ–æ—Ä–º–µ).
- –û–ë–©–ï–ï –ú–ù–ï–ù–ò–ï –≠–ö–°–ü–ï–†–¢–û–í (PERPLEXITY): –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –º–Ω–µ–Ω–∏–π —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ –º–∞—Ç—á—É (–≤–µ—Å: –í—ã—Å–æ–∫–∏–π).
- AI-–ê–ù–ê–õ–ò–ó –ò–ì–†–û–í–û–ô –§–û–†–ú–´: –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ñ–æ—Ä–º—ã –∫–æ–º–∞–Ω–¥, –≤–∫–ª—é—á–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∞—Ç–∞–∫—É, –æ–±–æ—Ä–æ–Ω—É –∏ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π).
- –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ü–û –°–û–°–¢–ê–í–ê–ú: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Å–æ—Å—Ç–∞–≤—ã, –ø–æ—Ç–µ—Ä–∏ –∏–≥—Ä–æ–∫–æ–≤ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é, —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π; —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–≤ (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π).
- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ (–°–í–û–î–ö–ê –ó–ê 7 –ú–ê–¢–ß–ï–ô): –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞—Ç–∞–∫–µ/–æ–±–æ—Ä–æ–Ω–µ (xG, —É–¥–∞—Ä—ã, –≤–ª–∞–¥–µ–Ω–∏–µ –∏ —Ç.–¥.) –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã, –≤–∫–ª—é—á–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (over/underperforming) (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π).
- –î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í: –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—ç—Ñ–æ–≤ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è, —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑" –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ (>10%). –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ –º–æ–¥–µ–ª—è–º (Poisson, Monte Carlo, xG) –∏ fair –∫—ç—Ñ—ã (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ –±–∞–∑—É).

–®–ê–ì 1. –§–ê–ö–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó (–ê–ù–ê–õ–ò–ó –í–•–û–î–ù–´–• –î–ê–ù–ù–´–•):
- 1.1. –ê–Ω–∞–ª–∏–∑ –¥–≤–∏–∂–µ–Ω–∏—è —Ä—ã–Ω–∫–∞ (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π): –í –±–ª–æ–∫–µ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í" –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π –∫–ª—é—á–µ–≤—ã–µ —Ä—ã–Ω–∫–∏ (–ø–æ–±–µ–¥–∞, —Ç–æ—Ç–∞–ª—ã, —Ñ–æ—Ä—ã). –í—ã–¥–µ–ª–∏ –ø—Ä–æ–≥—Ä—É–∑—ã (>10% –ø–∞–¥–µ–Ω–∏–µ –∫—ç—Ñ–∞) –∫–∞–∫ —Å–∏–≥–Ω–∞–ª—ã "—É–º–Ω—ã—Ö –¥–µ–Ω–µ–≥". –ó–∞–ø–∏—à–∏ fair –∫—ç—Ñ—ã –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏–∑ –º–æ–¥–µ–ª–µ–π (Poisson, Monte Carlo, xG) –∫–∞–∫ –±–∞–∑–æ–≤—É—é –æ—Ç–ø—Ä–∞–≤–Ω—É—é —Ç–æ—á–∫—É. –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–∫—É—â–∏–º–∏ –∫—ç—Ñ–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã—è–≤–ª–µ–Ω–∏—è value.
**–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è:** –ï—Å–ª–∏ –≤—ã—è–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä—É–∑ (>10% –ø–∞–¥–µ–Ω–∏–µ –∫—ç—Ñ–∞) –Ω–∞ –∏—Å—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ü–†–û–¢–ò–í–û–†–ï–ß–ò–¢ —Ç–≤–æ–µ–º—É –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É –≤—ã–≤–æ–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã –∑–∞ –ü1, –∞ –≥—Ä—É–∑—è—Ç –Ω–∞ –ü2), —ç—Ç–æ —Å–∏–≥–Ω–∞–ª **Tier 1 Alarm**.
* **–î–µ–π—Å—Ç–≤–∏–µ:** –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä—É–∑ –ø—Ä–æ—Ç–∏–≤ –º–æ–¥–µ–ª–∏ >10% ‚Äî –≤–µ—Å —Ñ–∞–∫—Ç–æ—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ú. –¢—ã –æ–±—è–∑–∞–Ω –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é –∏ —Å–∫—Ä—ã—Ç—ã–µ –∏–Ω—Å–∞–π–¥—ã.
- 1.2. –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π): –í –±–ª–æ–∫–µ "–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ (–°–í–û–î–ö–ê –ó–ê 7 –ú–ê–¢–ß–ï–ô)" –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–∑—É—á–∏ –∞—Ç–∞–∫—É (xG —Å–æ–∑–¥–∞–Ω–Ω—ã–µ, —É–¥–∞—Ä—ã, –∫–∞—Å–∞–Ω–∏—è –≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π, –±–æ–ª—å—à–∏–µ —à–∞–Ω—Å—ã). –ó–∞—Ç–µ–º –æ–±–æ—Ä–æ–Ω—É (xG –¥–æ–ø—É—â–µ–Ω–Ω—ã–µ, –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã, –æ—Ç–±–æ—Ä—ã, –æ—à–∏–±–∫–∏). –û—Ü–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (over/underperforming > ¬±0.3 xG/–º–∞—Ç—á –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–≥—Ä–µ—Å—Å–∞/–ø—Ä–æ–≥—Ä–µ—Å—Å–∞). –ö—Ä–æ—Å—Å-—Å—Ä–∞–≤–Ω–∏: xG –∞—Ç–∞–∫–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã vs xG –æ–±–æ—Ä–æ–Ω—ã –¥—Ä—É–≥–æ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏.
*–ü—Ä–∞–≤–∏–ª–æ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ (–ö–ª—ç–º–ø):** –í—ã—á–∏—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü—É (–ó–∞–±–∏—Ç–æ –≥–æ–ª–æ–≤ - xG) –∑–∞ –ø–µ—Ä–∏–æ–¥.
    * –ï—Å–ª–∏ overperforming > +0.5 –≥–æ–ª–∞/–º–∞—Ç—á (–∫–æ–º–∞–Ω–¥–∞ –∑–∞–±–∏–≤–∞–µ—Ç "–ª–∏—à–Ω–µ–µ"): –≠—Ç–æ –ù–ï —Ö–æ—Ä–æ—à–∞—è —Ñ–æ—Ä–º–∞, —ç—Ç–æ –≤–µ–∑–µ–Ω–∏–µ. **–ü–æ–Ω–∏–∂–∞–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏—Ö –≥–æ–ª–æ–≤/–ø–æ–±–µ–¥—ã –Ω–∞ 15%.**
    * –ï—Å–ª–∏ underperforming < -0.3 –≥–æ–ª–∞/–º–∞—Ç—á (–∫–æ–º–∞–Ω–¥–∞ –Ω–µ –∑–∞–±–∏–≤–∞–µ—Ç —Å–≤–æ–µ): –û–∂–∏–¥–∞–π –ø—Ä–æ—Ä—ã–≤–∞ (—Ä–µ–≥—Ä–µ—Å—Å–∏—è –∫ —Å—Ä–µ–¥–Ω–µ–º—É), –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–æ–Ω–µ –≤—ã–ª–µ—Ç–∞ —Å –ø–ª–æ—Ö–∏–º–∏ —É–¥–∞—Ä–∞–º–∏ –≤ —Å—Ç–≤–æ—Ä.
- 1.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI-–∞–Ω–∞–ª–∏–∑–∞ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º—ã (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π): –í –±–ª–æ–∫–µ "AI-–ê–ù–ê–õ–ò–ó –ò–ì–†–û–í–û–ô –§–û–†–ú–´" –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã–µ insights –Ω–∞–ø—Ä—è–º—É—é: –ø—Ä–∏–º–∏ —Ä–µ–∑—é–º–µ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, –∞—Ç–∞–∫—É—é—â–µ–º—É —Å—Ç–∏–ª—é (xG, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –≤—Ö–æ–¥—ã/–∫–∞—Å–∞–Ω–∏—è), –æ–±–æ—Ä–æ–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (xG —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤, –æ—Ç–±–æ—Ä—ã, –æ—à–∏–±–∫–∏) –∏ –æ–±—â–µ–º—É –≤—ã–≤–æ–¥—É –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ñ–æ—Ä–º—ã. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —ç—Ç–∏ insights —Å –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—Å–æ–∫–æ–≥–æ –≤–µ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, xG –∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏) –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–Ω–¥–µ–Ω—Ü–∏–π, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∞–∑–±–æ—Ä–∞.
**–ü—Ä–∞–≤–∏–ª–æ –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ—Å—Ç–∏:** –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–≥—Ä–æ–∫ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º xG/xA –∏–ª–∏ –ª–∏–¥–µ—Ä –æ–±–æ—Ä–æ–Ω—ã, –∏ –Ω–µ—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º/—Å—Ç–æ–∏–º–æ—Å—Ç—å—é:
    * –≠—Ç–æ —Ñ–∞–∫—Ç–æ—Ä **Tier 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ)**.
    * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–∂–∞–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∫–æ–º–∞–Ω–¥—ã –Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å "–ü–æ–±–µ–¥—ã" –¥–æ "–ù–∏—á—å–µ–π/–ù–µ–ø—Ä–æ–∏–≥—Ä—ã—à–∞").
- 1.4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –≤—ã–≤–æ–¥–æ–≤ –ø–æ —Å–æ—Å—Ç–∞–≤–∞–º (–≤–µ—Å: –≤—ã—Å–æ–∫–∏–π): –í –±–ª–æ–∫–µ "–ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ü–û –°–û–°–¢–ê–í–ê–ú" –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã–µ insights –Ω–∞–ø—Ä—è–º—É—é: –ø—Ä–∏–º–∏ –¥–µ—Ç–∞–ª–∏ –ø–æ –ø–æ—Ç–µ—Ä—è–º –∏–≥—Ä–æ–∫–æ–≤ (–ø—Ä–∏—á–∏–Ω—ã, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Ä–µ–π—Ç–∏–Ω–≥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞), –∫–ª—é—á–µ–≤—ã–º –æ—Å—Ç–∞–≤—à–∏–º—Å—è –∏–≥—Ä–æ–∫–∞–º –∏ –∏—Ö —Ä–æ–ª—è–º, —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–º—É –≤—ã–≤–æ–¥—É (—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥, —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∫–ª–∞—Å—Å–µ) –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞–¥—Ä–æ–≤. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π —ç—Ç–∏ insights —Å –¥—Ä—É–≥–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—Å–æ–∫–æ–≥–æ –≤–µ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–ª–∏—è–Ω–∏—è –Ω–∞ xG –∞—Ç–∞–∫–∏/–æ–±–æ—Ä–æ–Ω—ã), –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∞–∑–±–æ—Ä–∞.
- 1.5. –ê–Ω–∞–ª–∏–∑ –æ–±—â–µ–≥–æ –º–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ (–≤–µ—Å: –í—ã—Å–æ–∫–∏–π): –í –±–ª–æ–∫–µ "–û–ë–©–ï–ï –ú–ù–ï–ù–ò–ï –≠–ö–°–ü–ï–†–¢–û–í (PERPLEXITY)" –≤—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞/–ø—Ä–æ—Ç–∏–≤ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–º–∞—à–Ω—è—è —Ñ–æ—Ä–º–∞, BTTS-—Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏). –°—Ä–∞–≤–Ω–∏ —Å –º–æ–¥–µ–ª—è–º–∏ (fair –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏) –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π. –ö—Ä–æ—Å—Å-–ø—Ä–æ–≤–µ—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—Å–æ–∫–æ–≥–æ –≤–µ—Å–∞ (xG, —Ä—ã–Ω–æ–∫) ‚Äî –µ—Å–ª–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—Ç, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ.
- 1.6. –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—ã –∫–æ–º–∞–Ω–¥ (–≤–µ—Å: —Å—Ä–µ–¥–Ω–∏–π): –í –±–ª–æ–∫–µ "–§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE)" –æ—Ç–º–µ—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–∏–≥–µ, –æ—á–∫–∏ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (W/D/L –∑–∞ 5 –∏–≥—Ä). –£—á—Ç–∏ –¥–æ–º–∞—à–Ω–∏–π/–≤—ã–µ–∑–¥–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä. –ò—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è AI-–∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ä–º—ã, –Ω–æ –Ω–µ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä.
- 1.7. –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ª–∏—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á (–≤–µ—Å: —Å—Ä–µ–¥–Ω–∏–π, —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é): –í –±–ª–æ–∫–µ "–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H)" –ø–µ—Ä–µ—á–∏—Å–ª–∏ –Ω–µ–¥–∞–≤–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5-10). –£—á—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–æ—Å—Ç–∞–≤–∞—Ö/—Ñ–æ—Ä–º–µ —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–π —Å—Ç–∞—Ä—ã–µ –º–∞—Ç—á–∏ (>2 —Å–µ–∑–æ–Ω–∞) –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–∏—è –±–µ–∑ –ø–æ—Ä–∞–∂–µ–Ω–∏–π).
- 1.8. –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ (–≤–µ—Å: –Ω–∏–∑–∫–∏–π): –í –±–ª–æ–∫–µ "–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´" –æ—Ç–º–µ—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTTS –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º–∞—Ç—á–∞—Ö, —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ –ø–æ —Ç–∞–π–º–∞–º). –ò—Å–ø–æ–ª—å–∑—É–π –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫ —Å—Ü–µ–Ω–∞—Ä–∏—é, –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏.
* –ï—Å–ª–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 3-5 –º–∞—Ç—á–∞—Ö –µ—Å—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–π —Ç—Ä–µ–Ω–¥ (>60% –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä BTTS –∏–ª–∏ –ù–∏—á—å—è) ‚Äî –ø–æ–≤—ã—Å—å –≤–µ—Å —ç—Ç–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞ –¥–æ **High**.
- 1.9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤: –°—É–º–º–∏—Ä—É–π insights –ø–æ –≤–µ—Å–∞–º: –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç (>5% –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å), —Å—Ä–µ–¥–Ω–∏–π ‚Äî –¥–æ 3%, –Ω–∏–∑–∫–∏–π ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π. –ò—â–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —ç–∫—Å–ø–µ—Ä—Ç—ã vs —Ä—ã–Ω–æ–∫) –∏ —Ä–∞–∑—Ä–µ—à–∏ –∏—Ö –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—Å–æ–∫–æ–≥–æ –≤–µ—Å–∞. –£—á—Ç–∏ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ø–æ–≥–æ–¥–∞, —Å–∏–ª–∞ –ª–∏–≥ –≤ –µ–≤—Ä–æ–∫—É–±–∫–∞—Ö). –ü–æ–¥–≥–æ—Ç–æ–≤—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è –®–ê–ì–ê 2.
** –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ç—Ä–æ–≥–æ —Ç–∞–∫–æ–π:
    1) –†—ã–Ω–æ–∫ + Fair Odds
    2) –ö–∞–¥—Ä–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏ (Tier 1)
    3) xG –∞—Ç–∞–∫–∞ vs –æ–±–æ—Ä–æ–Ω–∞
    4) –≠–∫—Å–ø–µ—Ä—Ç—ã
    5) –§–æ—Ä–º–∞
    6) H2H / —Ñ–∞–∫—Ç—ã

–®–ê–ì 2. –†–ê–°–ß–ï–¢ –ò–°–¢–ò–ù–ù–û–ô –í–ï–†–û–Ø–¢–ù–û–°–¢–ò (ADJUSTED ODDS):
Fair Odds ‚Äî —ç—Ç–æ ¬´—á–∏—Å—Ç–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞¬ª (–ü—É–∞—Å—Å–æ–Ω/–ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –Ω–∞ –±–∞–∑–µ xG), –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∑–Ω–∞–µ—Ç –±–æ–ª—å—à–µ –Ω–µ –æ —á–µ–º –∫—Ä–æ–º–µ Xg —Ç–∞–∫ —á—Ç–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.
- 1. –ë–∞–∑–∞: –í–æ–∑—å–º–∏ fair –∫—ç—Ñ –∏–∑ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í" –∫–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å = 1 / fair –∫—ç—Ñ.
–í–æ–∑—å–º–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏–∑ "Fair Odds" (–±–∞–∑–∞) –∏ –ø—Ä–∏–º–µ–Ω–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –ø–æ —É—Ä–æ–≤–Ω—è–º.
*–°—É–º–º–∏—Ä—É–π –ø—Ä–æ—Ü–µ–Ω—Ç—ã, –Ω–æ –æ—Å—Ç–∞–≤–∞–π—Å—è –≤ —Ä–∞–º–∫–∞—Ö –∑–¥—Ä–∞–≤–æ–≥–æ —Å–º—ã—Å–ª–∞ (max ¬±18%).*

**üî¥ Tier 1: –í—ã—Å–æ–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ (¬±7% - 15%)**
* –ö—Ä–∏—Ç–∏—á–Ω–∞—è –ø–æ—Ç–µ—Ä—è –∫–ª—é—á–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ (–≤—ã—Å–æ–∫–∏–π xG/rating, –±–µ–∑ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–π –∑–∞–º–µ–Ω—ã).
* –ö–æ–º–∞–Ω–¥–∞ –∏–≥—Ä–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º (—Ä–æ—Ç–∞—Ü–∏—è).
* –ê–Ω–æ–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä—É–∑ —Ä—ã–Ω–∫–∞ –ø—Ä–æ—Ç–∏–≤ –Ω–∞—à–µ–π –º–æ–¥–µ–ª–∏ (—Ä—ã–Ω–æ–∫ –∑–Ω–∞–µ—Ç –∏–Ω—Å–∞–π–¥).
* –ú–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤.
* ANTI-REGRESSION RULE:
* –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ underperforming –ø–æ –≥–æ–ª–∞–º,–ù–û:
- Big Chances Missed > 1.3
- –û—à–∏–±–∫–∏, –≤–µ–¥—É—â–∏–µ –∫ –≥–æ–ª—É > 0.8
- –ü–æ—Ç–µ—Ä—è –∫–ª—é—á–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –±–∏–ª–¥-–∞–ø–∞
‚Üí –ù–ï —Å—á–∏—Ç–∞—Ç—å underperforming —Å–∏–≥–Ω–∞–ª–æ–º —Ä–µ–≥—Ä–µ—Å—Å–∏–∏.
‚Üí –°–ù–ò–ó–ò–¢–¨ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≥–æ–ª–∞ –Ω–∞ 10‚Äì15%.

**üü° Tier 2: –°—Ä–µ–¥–Ω–µ–µ –≤–ª–∏—è–Ω–∏–µ (¬±3% - 6%)**
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ 1-2 –∏–≥—Ä–æ–∫–æ–≤ –æ—Å–Ω–æ–≤—ã (–Ω–µ –∑–≤–µ–∑–¥).
* –°–∏–ª—å–Ω—ã–π Over/Underperforming (–æ–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏).
* –§–∞–∫—Ç–æ—Ä "–î–æ–º–∞—à–Ω–µ–π –∫—Ä–µ–ø–æ—Å—Ç–∏" –∏–ª–∏ "–£–∂–∞—Å–Ω–æ–π –∏–≥—Ä—ã –≤ –≥–æ—Å—Ç—è—Ö".
* –í—ã—Å–æ–∫–∞—è —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ –Ω–µ–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞.
* –†–∞–∑–Ω–∏—Ü–∞ –≤ xG (–∞—Ç–∞–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã >> –æ–±–æ—Ä–æ–Ω–∞ –¥—Ä—É–≥–æ–π, >0.5 —Ä–∞–∑–Ω–∏—Ü—ã).
* –•–æ—Ä–æ—à–∞—è —Ç–µ–∫—É—â–∞—è —Ñ–æ—Ä–º–∞ (3+ W –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –º–∞—Ç—á–∞—Ö –∏–∑ AI-–∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ä–º—ã)
* –ü–ª–æ—Ö–∞—è —Ç–µ–∫—É—â–∞—è —Ñ–æ—Ä–º–∞ (3+ L –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –º–∞—Ç—á–∞—Ö)
* H2H —Ç—Ä–µ–Ω–¥ >60%, –î–æ–º–∞—à–Ω—è—è/–ì–æ—Å—Ç–µ–≤–∞—è –∞–Ω–æ–º–∞–ª–∏—è

**üü¢ Tier 3: –ù–∏–∑–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ (¬±1% - 2%)**
* –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–¥–æ–∂–¥—å/–≤–µ—Ç–µ—Ä).

**‚õî STOP-FACTORS (TIER-1 EXTRA) ‚Äî –ó–ê–ü–†–ï–¢ –°–¢–ê–í–û–ö:**
–ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ, **–∑–∞–ø—Ä–µ—Ç–∏ —Å—Ç–∞–≤–∫—É –Ω–∞ –ß–∏—Å—Ç—É—é –ü–æ–±–µ–¥—É**:
a) –ö–æ–º–∞–Ω–¥–∞ –∏–º–µ–µ—Ç Over-performing > +0.5 –≥/–º–∞—Ç—á (–ø–µ—Ä–µ–±–æ—Ä —É–¥–∞—á–∏).
b) –†—ã–Ω–æ–∫ –ø—Ä–æ–≥—Ä—É–∂–µ–Ω (>8%) –ü–†–û–¢–ò–í —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.
c) –ö–ª—é—á–µ–≤–æ–π –ª–∏–¥–µ—Ä –∞—Ç–∞–∫–∏ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω.
*–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π —Ç–æ–ª—å–∫–æ: 1X, –§–æ—Ä–∞(0) –∏–ª–∏ –¢–ú.*
**‚õî STOP-FACTORS –ó–∞–ø—Ä–µ—Ç–∏—Ç—å BTTS, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚â•1 —É—Å–ª–æ–≤–∏—è:
- –ö–æ–º–∞–Ω–¥–∞ underperforming –ò Big Chances Missed > 1.3
- –ü–æ—Ç–µ—Ä—è –∫–ª—é—á–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–ª—è –∏–ª–∏ –ø–ª–µ–π–º–µ–π–∫–µ—Ä–∞
- –û—à–∏–±–∫–∏, –≤–µ–¥—É—â–∏–µ –∫ –≥–æ–ª—É > 1.0
- –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ —Ç–∞–π–º—ã >60% –¥–æ–º–∞/–≤ –≥–æ—Å—Ç—è—Ö

–®–ê–ì 2.1 –ß–ï–ö-–õ–ò–°–¢ –†–ï–ê–õ–ò–°–¢–ò–ß–ù–û–°–¢–ò (SANITY CHECK)
*–û—Ç–≤–µ—Ç—å "–î–ê" –∏–ª–∏ "–ù–ï–¢" –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ —Ä–∞—Å—á–µ—Ç–æ–º. –ï—Å–ª–∏ 3+ –æ—Ç–≤–µ—Ç–∞ "–î–ê" ‚Äî —Å–Ω–∏–∂–∞–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –¢–ë (–¢–æ—Ç–∞–ª –ë–æ–ª—å—à–µ) –∏ –ü–æ–±–µ–¥–µ —Ñ–∞–≤–æ—Ä–∏—Ç–∞.*

1. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–∞—Ç—á –¥–µ—Ä–±–∏ –∏–ª–∏ –∏–≥—Ä–æ–π –∫–æ–º–∞–Ω–¥ –∏–∑ –∑–æ–Ω—ã –≤—ã–ª–µ—Ç–∞ ("–±–∏—Ç–≤–∞ –∑–∞ 6 –æ—á–∫–æ–≤")?
2. –ï—Å—Ç—å –ª–∏ —É –æ–±–µ–∏—Ö –∫–æ–º–∞–Ω–¥ —Å–µ—Ä–∏—è –∏–∑ 3+ –º–∞—Ç—á–µ–π —Å –¢–ú 2.5?
3. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∑–∫–∏–µ —É–¥–∞—Ä—ã –≤ —Å—Ç–≤–æ—Ä (<3.5 –≤ —Å—Ä–µ–¥–Ω–µ–º)?
4. –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—Ç –ª–∏ "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã" —Ç–≤–æ–µ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã –∂–¥–µ—à—å –≥–æ–ª—ã, –∞ —Ñ–∞–∫—Ç –≥–æ–≤–æ—Ä–∏—Ç "–í—É–ª–≤–∑ –Ω–µ –∑–∞–±–∏–≤–∞—é—Ç 6 –º–∞—Ç—á–µ–π")?

–®–ê–ì 3. –°–¶–ï–ù–ê–†–ù–´–ô –ê–ù–ê–õ–ò–ó:
- –ù–∞ –æ—Å–Ω–æ–≤–µ xG, —Ñ–æ—Ä–º—ã –∏ –∫–∞–¥—Ä–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤—å 1-2 –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è –º–∞—Ç—á–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–î–æ–º–∞—à–Ω–∏–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –≤ –≤–ª–∞–¥–µ–Ω–∏–∏, –Ω–æ –≥–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É—é—Ç"). –û—Ü–µ–Ω–∏ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä—ã–Ω–∫–∏ (—Ç–æ—Ç–∞–ª, —Ñ–æ—Ä–∞, BTTS). –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π –ø–æ–≥–æ–¥—É/—Å—Ç–∞–¥–∏–æ–Ω –∏–∑ —Ñ–∞–∫—Ç–æ–≤, –µ—Å–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ.

–®–ê–ì 4. OSINT - –ü–û–ò–°–ö –ù–ï–î–û–°–¢–ê–Æ–©–ï–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò:
–ü–æ—Å–∫–æ–ª—å–∫—É –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç —É—Å—Ç–∞—Ä–µ—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–π –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1.  –í–≤–µ–¥–∏ –∑–∞–ø—Ä–æ—Å: *"[–ö–æ–º–∞–Ω–¥–∞ 1] vs [–ö–æ–º–∞–Ω–¥–∞ 2] team news injuries lineups update"* (—Ñ–∏–ª—å—Ç—Ä: –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞).
2.  –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –∏–≥—Ä–æ–∫–æ–≤, –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –∫–∞–∫ (–ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º).
3.  –ï—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏—à—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏–¥–µ—Ä –∑–∞—è–≤–ª–µ–Ω –≤ —Å—Ç–∞—Ä—Ç, —Ö–æ—Ç—è –≤ –¥–∞–Ω–Ω—ã—Ö –æ–Ω —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω) ‚Äî –ø—Ä–∏–º–∏ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∫–∞–∫ –∏—Å—Ç–∏–Ω—É.
4.  –ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ
5.  –ü–æ–∏—Å–∫ "match preview" –∏–ª–∏ "betting tips" –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 —á–∞—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "[–ö–æ–º–∞–Ω–¥–∞ 1] vs [–ö–æ–º–∞–Ω–¥–∞ 2] match preview injuries motivation").
–®–ê–ì 5. –§–ò–ù–ê–õ–¨–ù–´–ô –í–´–ë–û–† (VALUE CHECK):
- –¢—ã –û–ë–Ø–ó–ê–ù –≤—ã–±—Ä–∞—Ç—å –û–î–ù–£ —Å—Ç–∞–≤–∫—É —Å EV >1.08: (–¢–≤–æ—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å % / 100) * –¢–µ–∫—É—â–∏–π –∫—ç—Ñ >1.07. –î–∏–∞–ø–∞–∑–æ–Ω –∫—ç—Ñ–æ–≤: 1.40‚Äì3.00 (–∏–∑–±–µ–≥–∞–π –Ω–∏–∑–∫–∏—Ö/–≤—ã—Å–æ–∫–∏—Ö).
- –ï—Å–ª–∏ value –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚Äî —è–≤–Ω–æ –Ω–∞–ø–∏—à–∏: "VALUE –ù–ï–¢ ‚Äî –ü–†–û–ü–£–°–ö –ú–ê–¢–ß–ê".
= –ü—Ä–µ–¥–ø–æ—á—Ç–∏ —Ä—ã–Ω–∫–∏ —Å –ø—Ä–æ–≥—Ä—É–∑–æ–º –≤ —Ç–≤–æ—é —Å—Ç–æ—Ä–æ–Ω—É.
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–≤–æ–∫ —Å EV > 1.07 ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–±–µ—Ä–∏ —Å—Ç–∞–≤–∫—É —Å –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ú EV, –µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ > 0.04.
- –ï—Å–ª–∏ confidence < 3/5 ‚Äî –°–¢–ê–í–ö–ê –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø. –í–µ—Ä–Ω–∏: "–ú–∞—Ç—á –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞".

# –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê
–ë—É–¥—å –∫—Ä–∞—Ç–æ–∫ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω.
1. –ê–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤:
[–ö—Ä–∞—Ç–∫–æ: –¥–µ–ª—å—Ç–∞ —Å–æ—Å—Ç–∞–≤–æ–≤, —Ñ–æ—Ä–º–∞, xG, —Ä—ã–Ω–æ–∫ ‚Äî 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π]
2. –°—Ü–µ–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑:
[–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–æ–¥–∞ –º–∞—Ç—á–∞, 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è]
3. üèÜ –õ–£–ß–®–ê–Ø –°–¢–ê–í–ö–ê:

–†—ã–Ω–æ–∫: [–ù–∞–ø—Ä–∏–º–µ—Ä: –§–æ—Ä–∞ 1 (-0.5)]
–¢–µ–∫—É—â–∏–π –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: [–ß–∏—Å–ª–æ]
–†–∞—Å—á–µ—Ç–Ω—ã–π Fair Odds: [–ß–∏—Å–ª–æ –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏]
EV: [–†–∞—Å—á–µ—Ç: (–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å * –ö—ç—Ñ) - 1]
–ó–≤–µ–∑–¥–Ω–æ—Å—Ç—å: [‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê - ‚≠ê‚≠ê‚≠ê, –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–ª—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤]
–ñ–µ–ª–µ–∑–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: [–û–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—á–µ–º—É value]

--- –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê ---
–ú–∞—Ç—á: ${match}
${weatherText}
${factsText}
${sofascoreFormText}
${h2hText}
${expertOpinionText}
${performanceAnalysisText}
${combinedPlayerText}
${statshubHomePerformanceText}
${statshubAwayPerformanceText}
${oddsHistoryText}
`;
    }
}

module.exports = {
    generateFinalPrompt,
};