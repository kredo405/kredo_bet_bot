const { getPrediction } = require('../services/llm');
const { oddsData } = require('../services/database');
const { formatOddsHistory } = require('./helpers');




/**
 * Generates the final prompt string based on the selected prompt type.
 * @param {'single'|'express'} promptType 
 * @param {object} state The conversation state object.
 * @returns {string}
 */
async function generateFinalPrompt(promptType, state) {
    console.log("--- State received in prompt.js ---", JSON.stringify(state, null, 2));
    const { match, rawOddsHistory, weather, processedFacts, h2hData, statshubHomePerformance, statshubAwayPerformance, statshubMatchInfo, sofascoreLineups, processedHomePlayers, processedAwayPlayers, sofascorePregameForm, poissonProbabilities } = state;
    
    const oddsHistoryText = formatOddsHistory(rawOddsHistory, oddsData, poissonProbabilities);

    let weatherText = '';
    if (weather && weather.temp !== undefined && weather.condition) {
        weatherText = `–ü–û–ì–û–î–ê: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${weather.temp}, –£—Å–ª–æ–≤–∏—è: ${weather.condition}\n\n`;
    }

    let factsText = '';
    if (processedFacts && processedFacts.length > 0) {
        factsText = `–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´ [–í–µ—Å: –ù–∏–∑–∫–∏–π]:\n${processedFacts}\n\n`;
    }

    let sofascoreFormText = '';
    if (sofascorePregameForm) {
        sofascoreFormText = '–§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE) [–í–µ—Å: –°—Ä–µ–¥–Ω–∏–π]:\n';
        if (sofascorePregameForm.homeTeam) {
            const { position, value, form } = sofascorePregameForm.homeTeam;
            sofascoreFormText += `- –î–æ–º–∞—à–Ω—è—è –∫–æ–º–∞–Ω–¥–∞: –ü–æ–∑–∏—Ü–∏—è: ${position}, –û—á–∫–∏: ${value}, –§–æ—Ä–º–∞: ${form.join(', ')}\n`;
        }
        if (sofascorePregameForm.awayTeam) {
            const { position, value, form } = sofascorePregameForm.awayTeam;
            sofascoreFormText += `- –ì–æ—Å—Ç–µ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞: –ü–æ–∑–∏—Ü–∏—è: ${position}, –û—á–∫–∏: ${value}, –§–æ—Ä–º–∞: ${form.join(', ')}\n`;
        }
        sofascoreFormText += '\n';
    }

    let h2hText = '–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H) [–í–µ—Å: –°—Ä–µ–¥–Ω–∏–π, —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é]:\n';
    if (h2hData && h2hData.length > 0) {
        h2hText += h2hData.map(match => `- ${match.homeTeam} ${match.homeGoals} - ${match.awayGoals} ${match.awayTeam}`).join('\n');
    } else {
        h2hText += '–õ–∏—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.';
    }
    h2hText += '\n\n';

    const formatStatshubPerformance = (teamName, performanceData) => {
        if (!performanceData || performanceData.length === 0 || !teamName) return '';

        const numMatches = performanceData.length;

        // A list of all keys we want to aggregate
        const statKeys = [
            "expectedGoals", "bigChanceCreated", "bigChanceScored", "bigChanceMissed",
            "totalShotsInsideBox", "totalShotsOutsideBox", "touchesInOppBox", "finalThirdEntries",
            "ballPossession", "pass_accuracy",
            "goalsPrevented", "aerialDuelsPercentage", "duelWonPercent", "interceptionWon", "totalTackle", "wonTacklePercent",
            "errorsLeadToGoal"
        ];

        // Initialize accumulator for own and opponent stats
        const totals = { own: {}, opponent: {} };
        statKeys.forEach(key => {
            totals.own[key] = { total: 0, count: 0 };
            totals.opponent[key] = { total: 0, count: 0 };
        });
        totals.own.goalsScored = 0; // Special case for actual goals

        // Loop through matches and accumulate stats
        performanceData.forEach(match => {
            if (match.homeTeam === teamName) totals.own.goalsScored += match.scoreHome;
            else if (match.awayTeam === teamName) totals.own.goalsScored += match.scoreAway;

            statKeys.forEach(key => {
                // Own stats
                if (match.statistics && typeof match.statistics[key] === 'number') {
                    totals.own[key].total += match.statistics[key];
                    totals.own[key].count++;
                }
                // Opponent stats
                if (match.opponentStatistics && typeof match.opponentStatistics[key] === 'number') {
                    totals.opponent[key].total += match.opponentStatistics[key];
                    totals.opponent[key].count++;
                }
            });
        });
        
        // Helper to calculate average safely
        const avg = (stat) => {
            if (!stat || stat.count === 0) return 'N/A';
            return (stat.total / stat.count).toFixed(2);
        };

        // Neutral, data-driven interpretations
        const totalXG = totals.own.expectedGoals.total;
        const xgPerformanceDiff = totals.own.goalsScored - totalXG;
        let realizationInterpretation = "";
        if (xgPerformanceDiff > 0.1) {
            realizationInterpretation = `Overperforming (+${xgPerformanceDiff.toFixed(2)} –≥–æ–ª–∞ –∑–∞ ${numMatches} –º–∞—Ç—á–µ–π)`;
        } else if (xgPerformanceDiff < -0.1) {
            realizationInterpretation = `Underperforming (${xgPerformanceDiff.toFixed(2)} –≥–æ–ª–∞ –∑–∞ ${numMatches} –º–∞—Ç—á–µ–π)`;
        } else {
            realizationInterpretation = `(–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç xG)`;
        }

        let text = `–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ ${teamName.toUpperCase()} (–°–í–û–î–ö–ê –ó–ê ${numMatches} –ú–ê–¢–ß–ï–ô) [–í–µ—Å: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π]:\n\n`;
        
        text += `  –°–í–û–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê (–≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –º–∞—Ç—á):\n`;
        text += `    - –ê—Ç–∞–∫–∞: xG: ${avg(totals.own.expectedGoals)}, –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: ${realizationInterpretation}, –£–ø—É—â–µ–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.own.bigChanceMissed)}, –°–æ–∑–¥–∞–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.own.bigChanceCreated)}\n`;
        text += `    - –£–¥–∞—Ä—ã (–≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π/–≤–Ω–µ): ${avg(totals.own.totalShotsInsideBox)}/${avg(totals.own.totalShotsOutsideBox)}, –ö–∞—Å–∞–Ω–∏—è –≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π: ${avg(totals.own.touchesInOppBox)}, –í—Ö–æ–¥—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç—Ä–µ—Ç—å: ${avg(totals.own.finalThirdEntries)}\n`;
        text += `    - –í–ª–∞–¥–µ–Ω–∏–µ –∏ –ø–∞—Å—ã: –í–ª–∞–¥–µ–Ω–∏–µ: ${avg(totals.own.ballPossession)}%, –¢–æ—á–Ω–æ—Å—Ç—å –ø–∞—Å–æ–≤: ${avg(totals.own.pass_accuracy)}%\n`;
        text += `    - –û–±–æ—Ä–æ–Ω–∞: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –≥–æ–ª–æ–≤ (xG conceded - goals): ${avg(totals.own.goalsPrevented)}, –í—ã–∏–≥—Ä–∞–Ω–æ –¥—É—ç–ª–µ–π: ${avg(totals.own.duelWonPercent)}%, –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã: ${avg(totals.own.interceptionWon)}, –û—Ç–±–æ—Ä—ã: ${avg(totals.own.totalTackle)}\n`;
        text += `    - –û—à–∏–±–∫–∏, –ø—Ä–∏–≤–µ–¥—à–∏–µ –∫ –≥–æ–ª—É: ${avg(totals.own.errorsLeadToGoal)}\n\n`;

        text += `  –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–û–ü–ï–†–ù–ò–ö–û–í (–≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –º–∞—Ç—á):\n`;
        text += `    - –ê—Ç–∞–∫–∞: xG: ${avg(totals.opponent.expectedGoals)}, –°–æ–∑–¥–∞–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.opponent.bigChanceCreated)}, –£–ø—É—â–µ–Ω–æ –±–æ–ª—å—à–∏—Ö —à–∞–Ω—Å–æ–≤: ${avg(totals.opponent.bigChanceMissed)}\n`;
        text += `    - –£–¥–∞—Ä—ã (–≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π/–≤–Ω–µ): ${avg(totals.opponent.totalShotsInsideBox)}/${avg(totals.opponent.totalShotsOutsideBox)}, –ö–∞—Å–∞–Ω–∏—è –≤ —à—Ç—Ä–∞—Ñ–Ω–æ–π: ${avg(totals.opponent.touchesInOppBox)}, –í—Ö–æ–¥—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç—Ä–µ—Ç—å: ${avg(totals.opponent.finalThirdEntries)}\n`;
        text += `    - –í–ª–∞–¥–µ–Ω–∏–µ –∏ –ø–∞—Å—ã: –í–ª–∞–¥–µ–Ω–∏–µ: ${avg(totals.opponent.ballPossession)}%, –¢–æ—á–Ω–æ—Å—Ç—å –ø–∞—Å–æ–≤: ${avg(totals.opponent.pass_accuracy)}%\n`;
        text += `    - –û–±–æ—Ä–æ–Ω–∞: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –≥–æ–ª–æ–≤: ${avg(totals.opponent.goalsPrevented)}, –í—ã–∏–≥—Ä–∞–Ω–æ –¥—É—ç–ª–µ–π: ${avg(totals.opponent.duelWonPercent)}%, –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã: ${avg(totals.opponent.interceptionWon)}, –û—Ç–±–æ—Ä—ã: ${avg(totals.opponent.totalTackle)}\n`;
        text += `    - –û—à–∏–±–∫–∏, –ø—Ä–∏–≤–µ–¥—à–∏–µ –∫ –≥–æ–ª—É: ${avg(totals.opponent.errorsLeadToGoal)}\n\n`;
        
        return text;
    };

    const homeTeamName = statshubMatchInfo?.homeTeam?.name;
    const awayTeamName = statshubMatchInfo?.awayTeam?.name;
    const statshubHomePerformanceText = formatStatshubPerformance(homeTeamName, statshubHomePerformance);
    const statshubAwayPerformanceText = formatStatshubPerformance(awayTeamName, statshubAwayPerformance);
    
    // --- AI-POWERED PLAYER DATA COMBINATION ---
    let combinedPlayerText = '–°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú [–í–µ—Å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π]:\n\n–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∏–≥—Ä–æ–∫–∞–º.\n\n'; // Default text in case of error
    try {
        const playerDataPrompt = `
# –ó–ê–î–ê–ß–ê
–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç—Ä–∏ JSON-–æ–±—ä–µ–∫—Ç–∞: 
1. –°–æ—Å—Ç–∞–≤—ã –∫–æ–º–∞–Ω–¥ –∏–∑ Sofascore.
2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤ –¥–æ–º–∞—à–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ Statshub.
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤ –≥–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ Statshub.

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –µ–¥–∏–Ω—ã–π, –∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï

## 1. –°–æ—Å—Ç–∞–≤—ã Sofascore (lineups)
\`\`\`json
${JSON.stringify(sofascoreLineups, null, 2)}
\`\`\`

## 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–º–∞—à–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã (Statshub)
\`\`\`json
${JSON.stringify(processedHomePlayers, null, 2)}
\`\`\`

## 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã (Statshub)
\`\`\`json
${JSON.stringify(processedAwayPlayers, null, 2)}
\`\`\`

# –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´
1.  **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤:** –ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ—á–µ—Ç–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (fuzzy matching) –¥–ª—è –∏–º–µ–Ω. –ò–≥—Ä–æ–∫–∏ "K. De Bruyne" –∏ "Kevin De Bruyne" ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —á–µ–ª–æ–≤–µ–∫. –£—á–∏—Ç—ã–≤–∞–π —ç—Ç–æ.
2.  **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏–∑ —Å–µ–∫—Ü–∏–π 'squad' –∏ 'missingPlayers' –≤ —Å–æ—Å—Ç–∞–≤–∞—Ö Sofascore, –Ω–∞–π–¥–∏ –µ–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º JSON-–æ–±—ä–µ–∫—Ç–µ Statshub.
3.  **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–π –µ–¥–∏–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫, –≥–æ—Ç–æ–≤—ã–π –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç.
    - **–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** –ü—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤, –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò –ù–ï –í–ö–õ–Æ–ß–ê–ô —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏: possessionLost, dispossessed, accurateLongBalls, touches, blockedScoringAttempt.

# –ñ–ï–õ–ï–ó–ù–´–ô –§–û–†–ú–ê–¢ –í–´–í–û–î–ê (–°–¢–†–û–ì–û –°–õ–ï–î–û–í–ê–¢–¨!)

- –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¢–û–õ–¨–ö–û** –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º. **–ó–ê–ü–†–ï–©–ï–ù–û** –¥–æ–±–∞–≤–ª—è—Ç—å –ª—é–±—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–ª–∏ "–≤–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç".
- –í–∞–ª—é—Ç—É —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (marketValueCurrency) —Å–ª–µ–¥—É–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ —Å—É–º–º—ã.
- –ò—Å–ø–æ–ª—å–∑—É–π Markdown –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è.

–°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú [–í–µ—Å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π]:

**–î–û–ú–ê–®–ù–Ø–Ø –ö–û–ú–ê–ù–î–ê (–°—Ö–µ–º–∞: [—Å—Ö–µ–º–∞ –∏–∑ lineups.home.formation])**
  **–û–°–ù–û–í–ù–û–ô –°–û–°–¢–ê–í:**
    - **–ò–º—è –∏–≥—Ä–æ–∫–∞** (–†–µ–π—Ç–∏–Ω–≥ Sofascore: [avgRating]) [–ü–æ–∑–∏—Ü–∏—è: [position]] [–¢—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: [marketValue / 1,000,000]M [marketValueCurrency]]
      - *–°—Ä–µ–¥–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ò–≥—Ä: [gamesPlayedInLast5]/5):* { [–∫–ª—é—á]: [–∑–Ω–∞—á–µ–Ω–∏–µ], ... }
    - (–ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ squad)

  **–û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ì–†–û–ö–ò:**
    - **–ò–º—è –∏–≥—Ä–æ–∫–∞** (–ü—Ä–∏—á–∏–Ω–∞: [type], [description]) [–¢—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: [marketValue / 1,000,000]M [marketValueCurrency]]
      - *–°—Ä–µ–¥–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ò–≥—Ä: [gamesPlayedInLast5]/5):* { [–∫–ª—é—á]: [–∑–Ω–∞—á–µ–Ω–∏–µ], ... }
    - (–ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ missingPlayers. –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —É–∫–∞–∑–∞—Ç—å: "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")

**–ì–û–°–¢–ï–í–ê–Ø –ö–û–ú–ê–ù–î–ê (–°—Ö–µ–º–∞: [—Å—Ö–µ–º–∞ –∏–∑ lineups.away.formation])**
  (–ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç—É –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –≥–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã)

`;
        console.log("--- Sending player data prompt to AI ---");
        const aiResponse = await getPrediction(playerDataPrompt);
        if (aiResponse) {
            combinedPlayerText = aiResponse;
            console.log("--- AI successfully processed player data. ---");
        }
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ —á–µ—Ä–µ–∑ –ò–ò:", error);
        // combinedPlayerText –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    }
    // --- END AI-POWERED PLAYER DATA COMBINATION ---

    if (promptType === 'single') {
        return `–¢—ã ‚Äî —ç–ª–∏—Ç–Ω—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–ø–ø–µ—Ä—Å–∫–∏–π —Å–∏–Ω–¥–∏–∫–∞—Ç —É—Ä–æ–≤–Ω—è Circl/DarkLine.
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–π—Ç–∏ –æ–¥–Ω—É +EV (value) —Å—Ç–∞–≤–∫—É –Ω–∞ –º–∞—Ç—á. –ï—Å–ª–∏ value –Ω–µ—Ç ‚Äî —Ç—ã –¥–æ–ª–∂–µ–Ω —á–µ—Ç–∫–æ –Ω–∞–ø–∏—Å–∞—Ç—å ¬´Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ¬ª –∏ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø–æ—á–µ–º—É.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï
–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ç–µ–±–µ –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- –ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´: –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ –º–∞—Ç—á–µ.
- –§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE): –ü–æ–∑–∏—Ü–∏—è –≤ –ª–∏–≥–µ, –æ—á–∫–∏ –∏ —Ñ–æ—Ä–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∏–≥—Ä (W/D/L).
- –ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H): –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á.
- –°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Å–æ—Å—Ç–∞–≤—ã, —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤.
- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ (–°–í–û–î–ö–ê –ó–ê 7 –ú–ê–¢–ß–ï–ô): –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞—Ç–∞–∫–µ –∏ –æ–±–æ—Ä–æ–Ω–µ (xG, —É–¥–∞—Ä—ã, –≤–ª–∞–¥–µ–Ω–∏–µ –∏ —Ç.–¥.) –∏ –≤—ã–≤–æ–¥—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–º–µ–Ω—Ç–æ–≤ (over/underperforming).
- –î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í: –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—ç—Ñ–æ–≤ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ª–∏–Ω–∏–∏, —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑" –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏. –¢–∞–∫–∂–µ —Ç–∞–º –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞—è –∏–∑ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ - –º–∞—Ä–∂–∞. 

# –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´

–®–ê–ì 1. –§–ê–ö–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó (–ê–ù–ê–õ–ò–ó –í–•–û–î–ù–´–• –î–ê–ù–ù–´–•):
1.  **–ö–∞–¥—Ä–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** –í –±–ª–æ–∫–µ "–°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú" –∏–∑—É—á–∏ —Å–ø–∏—Å–æ–∫ "–û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ì–†–û–ö–ò". –û—Ü–µ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—å, –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∏—á–∏–Ω—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∫ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞.
2.  **–ò–≥—Ä–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
    - –í –±–ª–æ–∫–µ "–§–û–†–ú–ê –ö–û–ú–ê–ù–î" –æ—Ü–µ–Ω–∏ —Ç–µ–∫—É—â—É—é —Ñ–æ—Ä–º—É –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º (W/D/L).
    - –í –±–ª–æ–∫–µ "–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò" –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É "–†–µ–∞–ª–∏–∑–∞—Ü–∏—è". –û–ø—Ä–µ–¥–µ–ª–∏, –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—á–∫–∏ ("Overperforming") –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç –ª–∏ –æ—Ç –Ω–µ–≤–µ–∑–µ–Ω–∏—è ("Underperforming"). –û—Ü–µ–Ω–∏ —Å—Ä–µ–¥–Ω–∏–π xG –∏ xG —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤.
3.  **–î–≤–∏–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞:** –í –±–ª–æ–∫–µ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í" –Ω–∞–π–¥–∏ —Ä—ã–Ω–∫–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑". –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "—É–º–Ω—ã—Ö –¥–µ–Ω–µ–≥".
4.  **–ö–æ–Ω—Ç–µ–∫—Å—Ç –º–∞—Ç—á–∞:** –ò–∑—É—á–∏ "–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´" –∏ "–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H)", —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã.
5.  **–°–∏–ª–∞ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞:** –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–Ω–∏—Ü—É –≤ —Å–∏–ª–µ —á–µ–º–ø–∏–æ–Ω–∞—Ç–æ–≤, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –µ–≤—Ä–æ–∫—É–±–∫–∞—Ö). –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –±–æ–ª–µ–µ —Å–ª–∞–±–æ–≥–æ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞.

–®–ê–ì 2. –°–ò–ù–¢–ï–ó –ò –í–´–í–û–î:
- –¢—ã –º–æ–∂–µ—à—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –≤—Å–µ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
- –û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∏–∑ –®–ê–ì–ê 1, —Å—Ñ–æ—Ä–º–∏—Ä—É–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤ (–ü1, –•, –ü2, –¢–æ—Ç–∞–ª—ã –∏ —Ç.–¥.).
- –°—Ä–∞–≤–Ω–∏ —Å–≤–æ–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å —Ä—ã–Ω–æ—á–Ω—ã–º–∏ (–∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∏–∑ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤).
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ—à—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ +EV (–º–∏–Ω–∏–º—É–º +8% –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ –∏–ª–∏ +15% –¥–ª—è —Å–º–æ–ª–ª-–º–∞—Ä–∫–µ—Ç–æ–≤), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –æ—Ç–≤–µ—Ç –≤ "–ñ–ï–õ–ï–ó–ù–û–ú –§–û–†–ú–ê–¢–ï".
- –ï—Å–ª–∏ value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –Ω–∞–ø–∏—à–∏ "Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" –∏ –∫—Ä–∞—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É —Ä—ã–Ω–æ–∫ –æ—Ü–µ–Ω–µ–Ω –≤–µ—Ä–Ω–æ.

–ñ–ï–õ–ï–ó–ù–´–ô –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ):

**–ú–∞—Ç—á:** ${match}

**‚ö†Ô∏è –ö–ª—é—á–µ–≤–∞—è OSINT-–Ω–∞—Ö–æ–¥–∫–∞:**
[–æ–¥–Ω–∞ —Å–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è –Ω–∞—Ö–æ–¥–∫–∞ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Å–∏–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä—É–∑ –ª–∏–Ω–∏–∏]

**–î–æ–ø. –∏–Ω—Å–∞–π—Ç—ã (2-4 –ø—É–Ω–∫—Ç–∞):**
‚Ä¢ ‚Ä¶
‚Ä¢ ‚Ä¶

**–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è:**
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–µ –≥–æ–ª—ã –î–æ–º: X.XX (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞, –∞ –Ω–µ —á–∏—Å—Ç–æ–π —Å—Ç–∞—Ç—ã)
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–µ –≥–æ–ª—ã –ì–æ—Å—Ç–∏: X.XX
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¢–ë 2.5: XX% (—Ä—ã–Ω–æ–∫ –¥–∞—ë—Ç XX%)

**–í—ã–±—Ä–∞–Ω–Ω–∞—è value-—Å—Ç–∞–≤–∫–∞:**
[–Ω–∞–ø—Ä–∏–º–µ—Ä: –õ–∏–≤–µ—Ä–ø—É–ª—å -0.75 @ 1.95]

**–ë—Ä–∞—Ç—å –∫—ç—Ñ –Ω–µ –Ω–∏–∂–µ:** 1.XX

**–†–∞—Å—á—ë—Ç EV:**
–ú–æ—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: XX% ‚Üí fair odds 1.XX ‚Üí –ø—Ä–∏ 1.XX ‚Üí EV = +X.X%

**–ü–æ—á–µ–º—É —ç—Ç–æ value (3-5 –∂–µ–ª–µ–∑–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤):**
1. ‚Ä¶
2. ‚Ä¶

**–ì–ª–∞–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:**
1. ‚Ä¶

**–í—ã–≤–æ–¥:** [–ï—Å–ª–∏ value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —ç—Ç–æ—Ç –±–ª–æ–∫ –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ —á—Ç–æ –≤—ã—à–µ, –∫—Ä–æ–º–µ "–ú–∞—Ç—á"] Value –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. Closing line —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –º–æ–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤.

--- –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê ---
${weatherText}
${factsText}
${sofascoreFormText}
${h2hText}
${combinedPlayerText}
${statshubHomePerformanceText}
${statshubAwayPerformanceText}
${oddsHistoryText}
`;
    }

    if (promptType === 'express') {
        return `1. ü•á –†–û–õ–¨ –ò –ú–ò–°–°–ò–Ø (–ö–û–ù–¢–ï–ö–°–¢)
    –¢—ã ‚Äî Lead Betting Analyst –∑–∞–∫—Ä—ã—Ç–æ–≥–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ —Å–∏–Ω–¥–∏–∫–∞—Ç–∞. –¢–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ø–æ–∏—Å–∫ –Ω–µ–¥–æ–æ—Ü–µ–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (Value Betting) –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø—Ä–µ—Å—Å–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é.
    –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –Ω–µ —É–≥–∞–¥–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è, –∞ –Ω–∞–π—Ç–∏ –∏—Å—Ö–æ–¥, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–≥–æ —Ä—ã–Ω–æ–∫ –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç.

# –í–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï
–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ç–µ–±–µ –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- –ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´: –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ –º–∞—Ç—á–µ.
- –§–û–†–ú–ê –ö–û–ú–ê–ù–î (SOFASCORE): –ü–æ–∑–∏—Ü–∏—è –≤ –ª–∏–≥–µ, –æ—á–∫–∏ –∏ —Ñ–æ—Ä–º–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∏–≥—Ä (W/D/L).
- –ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H): –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—á–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á.
- –°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Å–æ—Å—Ç–∞–≤—ã, —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —Å—Ä–µ–¥–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤.
- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –ö–û–ú–ê–ù–î–´ (–°–í–û–î–ö–ê –ó–ê 7 –ú–ê–¢–ß–ï–ô): –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞—Ç–∞–∫–µ –∏ –æ–±–æ—Ä–æ–Ω–µ (xG, —É–¥–∞—Ä—ã, –≤–ª–∞–¥–µ–Ω–∏–µ –∏ —Ç.–¥.) –∏ –≤—ã–≤–æ–¥—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–º–µ–Ω—Ç–æ–≤ (over/underperforming).
- –î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í: –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—ç—Ñ–æ–≤ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ª–∏–Ω–∏–∏, —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑" –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏. –¢–∞–∫–∂–µ —Ç–∞–º –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞—è –ø–æ –º–æ–¥–µ–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ü–∞—É—Å—Å–æ–Ω–∞, MonteCarlo –∏ XG.

–®–ê–ì 1. –§–ê–ö–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó (–ê–ù–ê–õ–ò–ó –í–•–û–î–ù–´–• –î–ê–ù–ù–´–•):
1.  **–ö–∞–¥—Ä–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** –í –±–ª–æ–∫–µ "–°–í–û–î–ù–´–ï –î–ê–ù–ù–´–ï –ü–û –ò–ì–†–û–ö–ê–ú" –∏–∑—É—á–∏ —Å–ø–∏—Å–æ–∫ "–û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ì–†–û–ö–ò". –û—Ü–µ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—å, –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∏—á–∏–Ω—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Ä–µ–π—Ç–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∫ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞.
    **–ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤ —Å—Ç—Ä–æ–≥–æ –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:
        - xG, npXG, xA
        - rating
        - shots & key passes
        - tackles, interceptions, duels won
        - minutes played
        - transfer value
    –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–∞–∫ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ.**    
2.  **–ò–≥—Ä–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
    - –í –±–ª–æ–∫–µ "–§–û–†–ú–ê –ö–û–ú–ê–ù–î" –æ—Ü–µ–Ω–∏ —Ç–µ–∫—É—â—É—é —Ñ–æ—Ä–º—É –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º (W/D/L).
    - –í –±–ª–æ–∫–µ "–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò" –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É "–†–µ–∞–ª–∏–∑–∞—Ü–∏—è". –û–ø—Ä–µ–¥–µ–ª–∏, –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—á–∫–∏ ("Overperforming") –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç –ª–∏ –æ—Ç –Ω–µ–≤–µ–∑–µ–Ω–∏—è ("Underperforming"). –û—Ü–µ–Ω–∏ —Å—Ä–µ–¥–Ω–∏–π xG –∏ xG —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤, –æ–±–æ—Ä–æ–Ω—É, –∞—Ç–∞–∫—É –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.
3.  **–î–≤–∏–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞:** –í –±–ª–æ–∫–µ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í" –Ω–∞–π–¥–∏ —Ä—ã–Ω–∫–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø—Ä–æ–≥—Ä—É–∑". –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "—É–º–Ω—ã—Ö –¥–µ–Ω–µ–≥". –ù–µ –∏–¥–∏ –ø—Ä–æ—Ç–∏–≤ —Å–∏–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è —Ä—ã–Ω–∫–∞ –±–µ–∑ –∂–µ–ª–µ–∑–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –±–ª–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
4.  **–ö–æ–Ω—Ç–µ–∫—Å—Ç –º–∞—Ç—á–∞:** –ò–∑—É—á–∏ "–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´" –∏ "–ò–°–¢–û–†–ò–Ø –õ–ò–ß–ù–´–• –í–°–¢–†–ï–ß (H2H)", —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã.
5.  **–°–∏–ª–∞ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞:** –£—á–∏—Ç—ã–≤–∞–π —Ä–∞–∑–Ω–∏—Ü—É –≤ —Å–∏–ª–µ —á–µ–º–ø–∏–æ–Ω–∞—Ç–æ–≤, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –µ–≤—Ä–æ–∫—É–±–∫–∞—Ö). –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –±–æ–ª–µ–µ —Å–ª–∞–±–æ–≥–æ —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞.
6.  **–ö–∞–¥—Ä–æ–≤–∞—è —è–º–∞ (Delta Analysis): –°—Ä–∞–≤–Ω–∏ —Å–ø–∏—Å–æ–∫ "–û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ì–†–û–ö–ò" —Å "–û–°–ù–û–í–ù–û–ô –°–û–°–¢–ê–í".
7.  **–ï—Å–ª–∏ –≤—ã–±—ã–ª –∫–ª—é—á–µ–≤–æ–π –∏–≥—Ä–æ–∫ (–≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å/—Ä–µ–π—Ç–∏–Ω–≥), –Ω–∞–π–¥–∏, –∫—Ç–æ –∏–≥—Ä–∞–µ—Ç –Ω–∞ –µ–≥–æ –ø–æ–∑–∏—Ü–∏–∏ –≤ —Å—Ç–∞—Ä—Ç–µ.
8.  **–û—Ü–µ–Ω–∏ —Ä–∞–∑–Ω–∏—Ü—É –≤ –∫–ª–∞—Å—Å–µ. –ü—Ä–∏–º–µ—Ä: "–í—ã–±—ã–ª –æ—Å–Ω–æ–≤–Ω–æ–π –¶–ó (—Ä–µ–π—Ç–∏–Ω–≥ 7.5), –∏–≥—Ä–∞–µ—Ç –¥—É–±–ª–µ—Ä (—Ä–µ–π—Ç–∏–Ω–≥ 6.4) -> –û–∂–∏–¥–∞–π –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ü–µ–Ω—Ç—Ä–µ –æ–±–æ—Ä–æ–Ω—ã".
9.  **–ò–∑—É—á–∏ "–†–µ–∞–ª–∏–∑–∞—Ü–∏—é". –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ "Overperforming" (–∑–∞–±–∏–ª–∞ –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ xG) ‚Äî –∂–¥–∏ —Å–ø–∞–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ "Underperforming" ‚Äî –∂–¥–∏ –ø—Ä–æ—Ä—ã–≤–∞.
10. **–°—Ä–∞–≤–Ω–∏ xG —Å–æ–∑–¥–∞–Ω–Ω—ã–µ (–∞—Ç–∞–∫–∞) –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã —Å xG –¥–æ–ø—É—â–µ–Ω–Ω—ã–º–∏ (–æ–±–æ—Ä–æ–Ω–∞) –¥—Ä—É–≥–æ–π.

–®–ê–ì 2. –†–ê–°–ß–ï–¢ –ò–°–¢–ò–ù–ù–û–ô –í–ï–†–û–Ø–¢–ù–û–°–¢–ò (ADJUSTED ODDS):
1.  **–ë–∞–∑–∞:** –í–æ–∑—å–º–∏ –∑–∞ –æ—Å–Ω–æ–≤—É "Fair –∫—ç—Ñ" –∏–∑ –±–ª–æ–∫–∞ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í". –≠—Ç–æ —Ç–≤–æ—è –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞.
2.  **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞:** –ò–∑–º–µ–Ω–∏ —ç—Ç—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –®–ê–ì–ê 1.
3.  **–†—ã–Ω–æ–∫:** –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ "–ü—Ä–æ–≥—Ä—É–∑—ã". –ï—Å–ª–∏ —É–º–Ω—ã–µ –¥–µ–Ω—å–≥–∏ (–ø–∞–¥–µ–Ω–∏–µ –∫—ç—Ñ–∞ >10%) –∏–¥—É—Ç –ü–†–û–¢–ò–í —Ç–≤–æ–µ–≥–æ –º–Ω–µ–Ω–∏—è ‚Äî –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã.
4.  ** –ß—ë—Ç–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏:
        - –ö—Ä–∏—Ç–∏—á–Ω–∞—è –ø–æ—Ç–µ—Ä—è –∏–≥—Ä–æ–∫–∞: ‚àí3‚Ä¶‚àí6% –æ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
        - Overperforming > +0.4 xG: ‚àí3%
        - Underperforming > ‚àí0.4 xG: +3%
        - –ü—Ä–æ–≥—Ä—É–∑ > 12%: +4% –≤ —Å—Ç–æ—Ä–æ–Ω—É —Ä—ã–Ω–∫–∞
        - –†–∞–∑–Ω–∏—Ü–∞ –≤ xG –∞—Ç–∞–∫–∞ vs –æ–±–æ—Ä–æ–Ω–∞: ¬±3‚Äì7%
5.  **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤: 
        - –§–∞–∫—Ç–æ—Ä—ã —Å –≤—ã—Å–æ–∫–∏–º –≤–µ—Å–æ–º –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –∏—Ç–æ–≥–æ–≤—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å >5%
        - –§–∞–∫—Ç–æ—Ä—ã —Å–æ —Å—Ä–µ–¥–Ω–∏–º ‚Äî –¥–æ 3%
        - –§–∞–∫—Ç–æ—Ä—ã —Å –Ω–∏–∑–∫–∏–º ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ, –Ω–æ –Ω–µ –∏–∑–º–µ–Ω—è—é—â–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å.

–®–ê–ì 3. –°–¶–ï–ù–ê–†–ù–´–ô –ê–ù–ê–õ–ò–ó: 
–ù–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å, –∫–∞–∫ –ø–æ–π–¥–µ—Ç –∏–≥—Ä–∞.
–ö–∞–∫ —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç–∞–≤–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ—Ç–∞–ª, —Ñ–æ—Ä–∞)?
- –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ "–î–í–ò–ñ–ï–ù–ò–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–û–í".
- –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–º–µ—Ç–∫–∞ "–ø—Ä–æ–≥—Ä—É–∑" (–ø–∞–¥–µ–Ω–∏–µ –∫—ç—Ñ–∞ >10%) ‚Äî —Ä—ã–Ω–æ–∫ –≥—Ä—É–∑–∏—Ç –±–æ–ª—å—à–∏–µ –¥–µ–Ω—å–≥–∏. –ò–¥—Ç–∏ –ø—Ä–æ—Ç–∏–≤ –ø—Ä–æ–≥—Ä—É–∑–∞ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Å–∞–π–¥–∞ –∏–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ —Ç–æ–ª–ø—ã.
- –°—Ä–∞–≤–Ω–∏ "Fair –∫—ç—Ñ" –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ–∫—É—â–∏–º –∫—ç—Ñ–æ–º.

–®–∞–≥ 4. OSINT - –ø–æ–∏—Å–∫ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (—Ñ–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ)
- –î–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã—Ö —Ç–µ–±–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞ –Ω–∞–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.
- –ú–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –æ–± —ç—Ç–æ–º –º–∞—Ç—á–µ

–®–ê–ì 5. –§–ò–ù–ê–õ–¨–ù–´–ô –í–´–ë–û–† (VALUE CHECK):
–í—ã–±–µ—Ä–∏ —Å—Ç–∞–≤–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ñ–∏–ª—å—Ç—Ä EV (Expected Value):
* –§–æ—Ä–º—É–ª–∞: (–¢–≤–æ—è –û—Ü–µ–Ω–∫–∞ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ % / 100) * –¢–µ–∫—É—â–∏–π –ö—ç—Ñ –ë—É–∫–º–µ–∫–µ—Ä–∞ > 1.05
* –î–∏–∞–ø–∞–∑–æ–Ω –∫—ç—Ñ–æ–≤: 1.50 ‚Äì 2.60 (–∏–∑–±–µ–≥–∞–π —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏—Ö –∏ –ª–æ—Ç–µ—Ä–µ–π–Ω—ã—Ö –∫—ç—Ñ–æ–≤).

# –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê
–ë—É–¥—å –∫—Ä–∞—Ç–æ–∫ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω.

**1. –ê–Ω–∞–ª–∏–∑ –î–µ–ª—å—Ç—ã —Å–æ—Å—Ç–∞–≤–æ–≤:**
[–ö—Ç–æ –∫–æ–≥–æ –∑–∞–º–µ–Ω–∏–ª, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –ø–ª–æ—Ö–æ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã]

**2. –°—Ü–µ–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑:**
[–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–æ–¥–∞ –º–∞—Ç—á–∞]

**3. üèÜ –õ–£–ß–®–ê–Ø –°–¢–ê–í–ö–ê:**
* **–†—ã–Ω–æ–∫:** [–ù–∞–ø—Ä–∏–º–µ—Ä: –§–æ—Ä–∞ 2 (0)]
* **–¢–µ–∫—É—â–∏–π –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:** [–ß–∏—Å–ª–æ]
* **–†–∞—Å—á–µ—Ç–Ω—ã–π Fair Odds (—Å —É—á–µ—Ç–æ–º —Ç—Ä–∞–≤–º):** [–ß–∏—Å–ª–æ]
* **Value:** [–ï—Å—Ç—å –ª–∏ –ø–µ—Ä–µ–≤–µ—Å –Ω–∞–¥ –ª–∏–Ω–∏–µ–π?]
* **–ó–≤–µ–∑–¥–Ω–æ—Å—Ç—å:** [‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê - ‚≠ê‚≠ê‚≠ê]
* **–ñ–µ–ª–µ–∑–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç:** [–û–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—á–µ–º—É —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –∑–∞–π—Ç–∏]

--- –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê ---
–ú–∞—Ç—á: ${match}
${weatherText}
${factsText}
${sofascoreFormText}
${h2hText}
${combinedPlayerText}
${statshubHomePerformanceText}
${statshubAwayPerformanceText}
${oddsHistoryText}
`;
    }
}

module.exports = {
    generateFinalPrompt,
};